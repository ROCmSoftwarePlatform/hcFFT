#/bin/bash

set -e

do_ldconfig() {
    ln -sfn /opt/rocm/hcfft/lib/libhipfft.so /opt/rocm/lib/libhipfft.so
    ln -sfn /opt/rocm/hcfft/lib/libhcfft.so /opt/rocm/lib/libhcfft.so
    echo /opt/rocm/hcfft/lib > /etc/ld.so.conf.d/hcfft-rocm-dev.conf && ldconfig
}

case "$1" in
   configure)
       do_ldconfig
   ;;
   abort-upgrade|abort-remove|abort-deconfigure)
       echo "$1"
   ;;
   *)
       exit 0
   ;;
esac
